# Объединение плейлистов и хронологическая сортировка музыкальных альбомов

![Static Badge](https://img.shields.io/badge/Python-3.12-%233776AB)
![Static Badge](https://img.shields.io/badge/tkinter-_-%23000000)
![Static Badge](https://img.shields.io/badge/re-_-%23000000)
![Static Badge](https://img.shields.io/badge/Auto_Py_to_Exe-2.44.1-black)

## Инструкция по использованию

1. Укажите результирующий текстовый файл (по умолчанию — `Music.txt`), в который будет сохранён хронологически
сортированный список альбомов в формате:
    ```
    дата_релиза каталожный_номер    исполнитель//    альбом    дополнительная_информация
    ```
    `дата_релиза` (**здесь и далее**) в формате `гггг.мм.дд`.

    Между датой и каталожным номером (**здесь и далее**) стоит `пробел`.

    Между каталожным номером и исполнителем, а также перед и после альбома (**здесь и далее**) стоит `табуляция`.
    
    Вместо исполнителя может быть наименование фильма, ОСТом которого является альбом.


2. Укажите результирующий M3U8-файл (по умолчанию — `Music.m3u8`), в который будет сохранён результирующий плейлист
в кодировке UTF-8.


3. Укажите путь к папке с музыкой. Папка должна содержать следующую иерархию:
    ```
    Папка_с_музыкой
    |    Исполнитель1
    |    |    Альбом1
    |    |    |    Трек1
    |    |    |    …
    |    |    Альбом2
    |    |    |    Трек1
    |    |    |    …
    |    |    …
    |    |    Date-SN-Name.txt
    |    Исполнитель2
    …
    ```
    * `Исполнитель` — папка внутри папки с музыкой.
    Как упоминалось выше, вместо исполнителя может быть наименование фильма.
    * `Альбом` — папка с файлами треков. Наименование папки в формате:
        ```
      [дата_релиза каталожный_номер] наименование_альбома
      ```
    * Файл `Date-SN-Name.txt` содержит список альбомов исполнителя в формате:
        ```
      дата_релиза каталожный_номер    наименование_альбома    дополнительная_информация
      ```
        Первая строка в файле — наименование папки Исполнитель.

        Перед датой могут быть один из _выключателей из сканирования_: `?` или `-`, либо _включатель_ `+`.

        Цели файла `Date-SN-Name.txt`:
      * составление списка альбомов исполнителя для их последующего поиска,
      * отметка для альбома об отсутствии в папке исполнителя (`-`) (например, отказ от дубля),
      * отметка для альбома о неудачном поиске (`?`),
      * отметка о включении альбома в сканирование (`+`) (необязательная отметка ставится для читабильности, когда
      много альбомов выключено из сканирования),
      * после списка альбомов в конце файла сохранение URL ресурса для возвращения к поиску в будущем.

    Если при сканировании в какой-то папке исполнителя не обнаружится файл `Date-SN-Name.txt`, то выведется сообщение об
    ошибке, а результирующий плейлист не будет сформирован.


4. Укажите путь к папке с M3U8-файлами. Эти плейлисты должны быть составлены отдельно для каждого исполнителя и иметь
соответствующие имена. Т.е. имя плейлиста должно быть идентично имени папки исполнителя. Плейлисты с ID3-тегами и без
тегов должны быть разделены по разным папкам. Указывая папку с плейлистами с ID3-тегами, необходимо включить
соответствующий выключатель (см. п. 5).


5. Если желаете добавить в результирующий M3U8-файл ID3-теги, включите соответствующий выключатель. Но помните, что
теги берутся из исходных M3U8-файлов. Если тегов там нет, результат будет некорректен.


6. Обновление результирующего M3U8-файла происходит, если добавился (вместе с папкой исполнителя) или обновился хотя бы
один файл `Date-SN-Name.txt`. Если же обновился хотя бы один плейлист, тогда для обновления результирующего плейлиста
включите выключатель `Форсировать обновление результирующего M3U8-файла.`


7. Если желаете создать плейлист для запуска на другом устройстве (например, смартфоне с Android), подключенном через
локальную сеть, включите `Создать LAN-версию результирующего M3U8-файла.` и укажите сетевой адрес папки с музыкой
в SMB-формате. Папка с музыкой должна быть доступной для чтения через локальную сеть. Создастся второй плейлист
с суффиксом `_LAN`.


8. Нажмите на кнопку `OK` для запуска сканирования папки и формирования сортированного плейлиста.

## Краткий алгоритм работы программы:

* Программа сканирует указанную папку с музыкой.
* Читает в каждой папке исполнителя файл `Date-SN-Name.txt` и, ориентируясь на _выключатели_, формирует результирующий
текстовый файл с сортированным списком всех альбомов.
* На основе получившегося списка альбомов формируется результирующий плейлист из плейлистов исполнителей.
* Если хотя бы в одной папке исполнителя нет файла `Date-SN-Name.txt`, результирующий плейлист сформирован не будет.
Будет выведено сообщение об отсутствии файла `Date-SN-Name.txt` в конкретной папке.